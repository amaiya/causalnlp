---

title: Auto Coder


keywords: fastai
sidebar: home_sidebar

summary: "Automatically codes text fields such as open-ended survey questions based on lingustic properties such as topic and sentiment."
description: "Automatically codes text fields such as open-ended survey questions based on lingustic properties such as topic and sentiment."
nb_path: "nbs/01_autocoder.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/01_autocoder.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Autocoder" class="doc_header"><code>class</code> <code>Autocoder</code><a href="https://github.com/amaiya/causalnlp/tree/main/causalnlp/autocoder.py#L11" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Autocoder</code>(<strong><code>verbose</code></strong>=<em><code>1</code></em>, <strong><code>device</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>Autocodes text fields</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="Autocoder.code_sentiment" class="doc_header"><code>Autocoder.code_sentiment</code><a href="__main__.py#L49" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>Autocoder.code_sentiment</code>(<strong><code>docs</code></strong>, <strong><code>df</code></strong>, <strong><code>batch_size</code></strong>=<em><code>8</code></em>, <strong><code>binarize</code></strong>=<em><code>False</code></em>, <strong><code>threshold</code></strong>=<em><code>0.5</code></em>)</p>
</blockquote>
<p>Autocodes text for positive or negative sentiment</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's prepare a toy dataset:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ac</span> <span class="o">=</span> <span class="n">Autocoder</span><span class="p">()</span>
<span class="n">reviews</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;I loved this doctor!&quot;</span><span class="p">,</span> <span class="s2">&quot;This doctor was absolutely terrible.&quot;</span><span class="p">]</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;female&#39;</span><span class="p">,</span> <span class="s1">&#39;male&#39;</span><span class="p">],</span>
     <span class="s1">&#39;review&#39;</span> <span class="p">:</span> <span class="n">reviews</span><span class="p">,</span>
      <span class="p">})</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>gender</th>
      <th>review</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>female</td>
      <td>I loved this doctor!</td>
    </tr>
    <tr>
      <th>1</th>
      <td>male</td>
      <td>This doctor was absolutely terrible.</td>
    </tr>
  </tbody>
</table>
</div></div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>After autocoding for sentiment, the dataframe now has extra columns:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">result_df</span> <span class="o">=</span> <span class="n">ac</span><span class="o">.</span><span class="n">code_sentiment</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;review&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">df</span><span class="p">)</span>
<span class="n">result_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>gender</th>
      <th>review</th>
      <th>negative</th>
      <th>positive</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>female</td>
      <td>I loved this doctor!</td>
      <td>0.005034</td>
      <td>0.994966</td>
    </tr>
    <tr>
      <th>1</th>
      <td>male</td>
      <td>This doctor was absolutely terrible.</td>
      <td>0.981789</td>
      <td>0.018211</td>
    </tr>
  </tbody>
</table>
</div></div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="n">result_df</span><span class="p">[</span><span class="n">result_df</span><span class="p">[</span><span class="s1">&#39;gender&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;female&#39;</span><span class="p">][</span><span class="s1">&#39;negative&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">0.1</span>
<span class="k">assert</span> <span class="n">result_df</span><span class="p">[</span><span class="n">result_df</span><span class="p">[</span><span class="s1">&#39;gender&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;female&#39;</span><span class="p">][</span><span class="s1">&#39;positive&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0.9</span>
<span class="k">assert</span> <span class="n">result_df</span><span class="p">[</span><span class="n">result_df</span><span class="p">[</span><span class="s1">&#39;gender&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;male&#39;</span><span class="p">][</span><span class="s1">&#39;negative&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0.9</span>
<span class="k">assert</span> <span class="n">result_df</span><span class="p">[</span><span class="n">result_df</span><span class="p">[</span><span class="s1">&#39;gender&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;male&#39;</span><span class="p">][</span><span class="s1">&#39;positive&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">0.1</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="Autocoder.code_custom_topics" class="doc_header"><code>Autocoder.code_custom_topics</code><a href="__main__.py#L77" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>Autocoder.code_custom_topics</code>(<strong><code>docs</code></strong>, <strong><code>df</code></strong>, <strong><code>labels</code></strong>, <strong><code>batch_size</code></strong>=<em><code>8</code></em>, <strong><code>binarize</code></strong>=<em><code>False</code></em>, <strong><code>threshold</code></strong>=<em><code>0.5</code></em>)</p>
</blockquote>
<p>Autocodes text for user-specified topics.
The <code>label</code> field is the name of the topic as a string (or a list of them.)</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's prepare a toy dataset:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">comments</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;What is your favorite sitcom of all time?&quot;</span><span class="p">,</span> <span class="s1">&#39;I cannot wait to vote!&#39;</span><span class="p">]</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">&#39;over_18&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;yes&#39;</span><span class="p">,</span> <span class="s1">&#39;no&#39;</span><span class="p">],</span>
     <span class="s1">&#39;comments&#39;</span> <span class="p">:</span> <span class="n">comments</span><span class="p">,</span>
      <span class="p">})</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>over_18</th>
      <th>comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>yes</td>
      <td>What is your favorite sitcom of all time?</td>
    </tr>
    <tr>
      <th>1</th>
      <td>no</td>
      <td>I cannot wait to vote!</td>
    </tr>
  </tbody>
</table>
</div></div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>After autocoding, the dataframe has a new column for each custom topic:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">result_df</span> <span class="o">=</span> <span class="n">ac</span><span class="o">.</span><span class="n">code_custom_topics</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;comments&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;television&#39;</span><span class="p">,</span> <span class="s1">&#39;film&#39;</span><span class="p">,</span> <span class="s1">&#39;politics&#39;</span><span class="p">])</span>
<span class="n">result_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>over_18</th>
      <th>comments</th>
      <th>television</th>
      <th>film</th>
      <th>politics</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>yes</td>
      <td>What is your favorite sitcom of all time?</td>
      <td>0.981327</td>
      <td>0.012260</td>
      <td>0.000157</td>
    </tr>
    <tr>
      <th>1</th>
      <td>no</td>
      <td>I cannot wait to vote!</td>
      <td>0.000518</td>
      <td>0.004943</td>
      <td>0.936988</td>
    </tr>
  </tbody>
</table>
</div></div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="n">result_df</span><span class="p">[</span><span class="n">result_df</span><span class="p">[</span><span class="s1">&#39;over_18&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;yes&#39;</span><span class="p">][</span><span class="s1">&#39;television&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0.9</span>
<span class="k">assert</span> <span class="n">result_df</span><span class="p">[</span><span class="n">result_df</span><span class="p">[</span><span class="s1">&#39;over_18&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;yes&#39;</span><span class="p">][</span><span class="s1">&#39;film&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">0.1</span>
<span class="k">assert</span> <span class="n">result_df</span><span class="p">[</span><span class="n">result_df</span><span class="p">[</span><span class="s1">&#39;over_18&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;yes&#39;</span><span class="p">][</span><span class="s1">&#39;politics&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">0.1</span>
<span class="k">assert</span> <span class="n">result_df</span><span class="p">[</span><span class="n">result_df</span><span class="p">[</span><span class="s1">&#39;over_18&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;no&#39;</span><span class="p">][</span><span class="s1">&#39;television&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">0.1</span>
<span class="k">assert</span> <span class="n">result_df</span><span class="p">[</span><span class="n">result_df</span><span class="p">[</span><span class="s1">&#39;over_18&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;no&#39;</span><span class="p">][</span><span class="s1">&#39;film&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">0.1</span>
<span class="k">assert</span> <span class="n">result_df</span><span class="p">[</span><span class="n">result_df</span><span class="p">[</span><span class="s1">&#39;over_18&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;no&#39;</span><span class="p">][</span><span class="s1">&#39;politics&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0.9</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="Autocoder.code_emotion" class="doc_header"><code>Autocoder.code_emotion</code><a href="__main__.py#L63" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>Autocoder.code_emotion</code>(<strong><code>docs</code></strong>, <strong><code>df</code></strong>, <strong><code>batch_size</code></strong>=<em><code>8</code></em>, <strong><code>binarize</code></strong>=<em><code>False</code></em>, <strong><code>threshold</code></strong>=<em><code>0.5</code></em>)</p>
</blockquote>
<p>Autocodes text for emotion</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">comments</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;I&#39;m nervous about tomorrow.&quot;</span><span class="p">,</span> <span class="s1">&#39;I got a promotion at work!&#39;</span><span class="p">,</span>
            <span class="s2">&quot;My best friend was in a car accident.&quot;</span><span class="p">,</span> <span class="s2">&quot;I hate it when I&#39;m cut off in traffic.&quot;</span><span class="p">]</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">&#39;over_18&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;yes&#39;</span><span class="p">,</span> <span class="s1">&#39;no&#39;</span><span class="p">,</span> <span class="s1">&#39;yes&#39;</span><span class="p">,</span> <span class="s1">&#39;yes&#39;</span><span class="p">],</span>
     <span class="s1">&#39;comments&#39;</span> <span class="p">:</span> <span class="n">comments</span><span class="p">,</span>
      <span class="p">})</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>over_18</th>
      <th>comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>yes</td>
      <td>I'm nervous about tomorrow.</td>
    </tr>
    <tr>
      <th>1</th>
      <td>no</td>
      <td>I got a promotion at work!</td>
    </tr>
    <tr>
      <th>2</th>
      <td>yes</td>
      <td>My best friend was in a car accident.</td>
    </tr>
    <tr>
      <th>3</th>
      <td>yes</td>
      <td>I hate it when I'm cut off in traffic.</td>
    </tr>
  </tbody>
</table>
</div></div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">result_df</span> <span class="o">=</span> <span class="n">ac</span><span class="o">.</span><span class="n">code_emotion</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;comments&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">binarize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">result_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>over_18</th>
      <th>comments</th>
      <th>joy</th>
      <th>anger</th>
      <th>fear</th>
      <th>sadness</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>yes</td>
      <td>I'm nervous about tomorrow.</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>no</td>
      <td>I got a promotion at work!</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>yes</td>
      <td>My best friend was in a car accident.</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>yes</td>
      <td>I hate it when I'm cut off in traffic.</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div></div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="n">result_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;fear&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span>
<span class="k">assert</span> <span class="n">result_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;joy&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span>
<span class="k">assert</span> <span class="n">result_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="s1">&#39;sadness&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span>
<span class="k">assert</span> <span class="n">result_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="s1">&#39;anger&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="Autocoder.code_transformer" class="doc_header"><code>Autocoder.code_transformer</code><a href="__main__.py#L118" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>Autocoder.code_transformer</code>(<strong><code>docs</code></strong>, <strong><code>df</code></strong>, <strong><code>batch_size</code></strong>=<em><code>32</code></em>, <strong><code>model_name</code></strong>=<em><code>'stsb-roberta-large'</code></em>, <strong><code>show_progress_bar</code></strong>=<em><code>False</code></em>)</p>
</blockquote>
<p>Encode texts as semantically meaningful vectors using a Transformer model</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">reviews</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;I loved this doctor!&quot;</span><span class="p">,</span> <span class="s2">&quot;This doctor was absolutely terrible.&quot;</span><span class="p">]</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;female&#39;</span><span class="p">,</span> <span class="s1">&#39;male&#39;</span><span class="p">],</span>
     <span class="s1">&#39;review&#39;</span> <span class="p">:</span> <span class="n">reviews</span><span class="p">,</span>
      <span class="p">})</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>gender</th>
      <th>review</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>female</td>
      <td>I loved this doctor!</td>
    </tr>
    <tr>
      <th>1</th>
      <td>male</td>
      <td>This doctor was absolutely terrible.</td>
    </tr>
  </tbody>
</table>
</div></div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">ac</span><span class="o">.</span><span class="n">code_transformer</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">review</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">df</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>gender</th>
      <th>review</th>
      <th>e_0000</th>
      <th>e_0001</th>
      <th>e_0002</th>
      <th>e_0003</th>
      <th>e_0004</th>
      <th>e_0005</th>
      <th>e_0006</th>
      <th>e_0007</th>
      <th>e_0008</th>
      <th>e_0009</th>
      <th>e_0010</th>
      <th>e_0011</th>
      <th>e_0012</th>
      <th>e_0013</th>
      <th>e_0014</th>
      <th>e_0015</th>
      <th>e_0016</th>
      <th>e_0017</th>
      <th>e_0018</th>
      <th>e_0019</th>
      <th>e_0020</th>
      <th>e_0021</th>
      <th>e_0022</th>
      <th>e_0023</th>
      <th>e_0024</th>
      <th>e_0025</th>
      <th>e_0026</th>
      <th>e_0027</th>
      <th>e_0028</th>
      <th>e_0029</th>
      <th>e_0030</th>
      <th>e_0031</th>
      <th>e_0032</th>
      <th>e_0033</th>
      <th>e_0034</th>
      <th>e_0035</th>
      <th>e_0036</th>
      <th>e_0037</th>
      <th>e_0038</th>
      <th>e_0039</th>
      <th>e_0040</th>
      <th>e_0041</th>
      <th>e_0042</th>
      <th>e_0043</th>
      <th>e_0044</th>
      <th>e_0045</th>
      <th>e_0046</th>
      <th>e_0047</th>
      <th>e_0048</th>
      <th>e_0049</th>
      <th>e_0050</th>
      <th>e_0051</th>
      <th>e_0052</th>
      <th>e_0053</th>
      <th>e_0054</th>
      <th>e_0055</th>
      <th>e_0056</th>
      <th>e_0057</th>
      <th>e_0058</th>
      <th>e_0059</th>
      <th>e_0060</th>
      <th>e_0061</th>
      <th>e_0062</th>
      <th>e_0063</th>
      <th>e_0064</th>
      <th>e_0065</th>
      <th>e_0066</th>
      <th>e_0067</th>
      <th>e_0068</th>
      <th>e_0069</th>
      <th>e_0070</th>
      <th>e_0071</th>
      <th>e_0072</th>
      <th>e_0073</th>
      <th>e_0074</th>
      <th>e_0075</th>
      <th>e_0076</th>
      <th>e_0077</th>
      <th>e_0078</th>
      <th>e_0079</th>
      <th>e_0080</th>
      <th>e_0081</th>
      <th>e_0082</th>
      <th>e_0083</th>
      <th>e_0084</th>
      <th>e_0085</th>
      <th>e_0086</th>
      <th>e_0087</th>
      <th>e_0088</th>
      <th>e_0089</th>
      <th>e_0090</th>
      <th>e_0091</th>
      <th>e_0092</th>
      <th>e_0093</th>
      <th>e_0094</th>
      <th>e_0095</th>
      <th>e_0096</th>
      <th>e_0097</th>
      <th>e_0098</th>
      <th>e_0099</th>
      <th>e_0100</th>
      <th>e_0101</th>
      <th>e_0102</th>
      <th>e_0103</th>
      <th>e_0104</th>
      <th>e_0105</th>
      <th>e_0106</th>
      <th>e_0107</th>
      <th>e_0108</th>
      <th>e_0109</th>
      <th>e_0110</th>
      <th>e_0111</th>
      <th>e_0112</th>
      <th>e_0113</th>
      <th>e_0114</th>
      <th>e_0115</th>
      <th>e_0116</th>
      <th>e_0117</th>
      <th>e_0118</th>
      <th>e_0119</th>
      <th>e_0120</th>
      <th>e_0121</th>
      <th>e_0122</th>
      <th>e_0123</th>
      <th>e_0124</th>
      <th>e_0125</th>
      <th>e_0126</th>
      <th>e_0127</th>
      <th>e_0128</th>
      <th>e_0129</th>
      <th>e_0130</th>
      <th>e_0131</th>
      <th>e_0132</th>
      <th>e_0133</th>
      <th>e_0134</th>
      <th>e_0135</th>
      <th>e_0136</th>
      <th>e_0137</th>
      <th>e_0138</th>
      <th>e_0139</th>
      <th>e_0140</th>
      <th>e_0141</th>
      <th>e_0142</th>
      <th>e_0143</th>
      <th>e_0144</th>
      <th>e_0145</th>
      <th>e_0146</th>
      <th>e_0147</th>
      <th>e_0148</th>
      <th>e_0149</th>
      <th>e_0150</th>
      <th>e_0151</th>
      <th>e_0152</th>
      <th>e_0153</th>
      <th>e_0154</th>
      <th>e_0155</th>
      <th>e_0156</th>
      <th>e_0157</th>
      <th>e_0158</th>
      <th>e_0159</th>
      <th>e_0160</th>
      <th>e_0161</th>
      <th>e_0162</th>
      <th>e_0163</th>
      <th>e_0164</th>
      <th>e_0165</th>
      <th>e_0166</th>
      <th>e_0167</th>
      <th>e_0168</th>
      <th>e_0169</th>
      <th>e_0170</th>
      <th>e_0171</th>
      <th>e_0172</th>
      <th>e_0173</th>
      <th>e_0174</th>
      <th>e_0175</th>
      <th>e_0176</th>
      <th>e_0177</th>
      <th>e_0178</th>
      <th>e_0179</th>
      <th>e_0180</th>
      <th>e_0181</th>
      <th>e_0182</th>
      <th>e_0183</th>
      <th>e_0184</th>
      <th>e_0185</th>
      <th>e_0186</th>
      <th>e_0187</th>
      <th>e_0188</th>
      <th>e_0189</th>
      <th>e_0190</th>
      <th>e_0191</th>
      <th>e_0192</th>
      <th>e_0193</th>
      <th>e_0194</th>
      <th>e_0195</th>
      <th>e_0196</th>
      <th>e_0197</th>
      <th>e_0198</th>
      <th>e_0199</th>
      <th>e_0200</th>
      <th>e_0201</th>
      <th>e_0202</th>
      <th>e_0203</th>
      <th>e_0204</th>
      <th>e_0205</th>
      <th>e_0206</th>
      <th>e_0207</th>
      <th>e_0208</th>
      <th>e_0209</th>
      <th>e_0210</th>
      <th>e_0211</th>
      <th>e_0212</th>
      <th>e_0213</th>
      <th>e_0214</th>
      <th>e_0215</th>
      <th>e_0216</th>
      <th>e_0217</th>
      <th>e_0218</th>
      <th>e_0219</th>
      <th>e_0220</th>
      <th>e_0221</th>
      <th>e_0222</th>
      <th>e_0223</th>
      <th>e_0224</th>
      <th>e_0225</th>
      <th>e_0226</th>
      <th>e_0227</th>
      <th>e_0228</th>
      <th>e_0229</th>
      <th>e_0230</th>
      <th>e_0231</th>
      <th>e_0232</th>
      <th>e_0233</th>
      <th>e_0234</th>
      <th>e_0235</th>
      <th>e_0236</th>
      <th>e_0237</th>
      <th>e_0238</th>
      <th>e_0239</th>
      <th>e_0240</th>
      <th>e_0241</th>
      <th>e_0242</th>
      <th>e_0243</th>
      <th>e_0244</th>
      <th>e_0245</th>
      <th>e_0246</th>
      <th>e_0247</th>
      <th>...</th>
      <th>e_0774</th>
      <th>e_0775</th>
      <th>e_0776</th>
      <th>e_0777</th>
      <th>e_0778</th>
      <th>e_0779</th>
      <th>e_0780</th>
      <th>e_0781</th>
      <th>e_0782</th>
      <th>e_0783</th>
      <th>e_0784</th>
      <th>e_0785</th>
      <th>e_0786</th>
      <th>e_0787</th>
      <th>e_0788</th>
      <th>e_0789</th>
      <th>e_0790</th>
      <th>e_0791</th>
      <th>e_0792</th>
      <th>e_0793</th>
      <th>e_0794</th>
      <th>e_0795</th>
      <th>e_0796</th>
      <th>e_0797</th>
      <th>e_0798</th>
      <th>e_0799</th>
      <th>e_0800</th>
      <th>e_0801</th>
      <th>e_0802</th>
      <th>e_0803</th>
      <th>e_0804</th>
      <th>e_0805</th>
      <th>e_0806</th>
      <th>e_0807</th>
      <th>e_0808</th>
      <th>e_0809</th>
      <th>e_0810</th>
      <th>e_0811</th>
      <th>e_0812</th>
      <th>e_0813</th>
      <th>e_0814</th>
      <th>e_0815</th>
      <th>e_0816</th>
      <th>e_0817</th>
      <th>e_0818</th>
      <th>e_0819</th>
      <th>e_0820</th>
      <th>e_0821</th>
      <th>e_0822</th>
      <th>e_0823</th>
      <th>e_0824</th>
      <th>e_0825</th>
      <th>e_0826</th>
      <th>e_0827</th>
      <th>e_0828</th>
      <th>e_0829</th>
      <th>e_0830</th>
      <th>e_0831</th>
      <th>e_0832</th>
      <th>e_0833</th>
      <th>e_0834</th>
      <th>e_0835</th>
      <th>e_0836</th>
      <th>e_0837</th>
      <th>e_0838</th>
      <th>e_0839</th>
      <th>e_0840</th>
      <th>e_0841</th>
      <th>e_0842</th>
      <th>e_0843</th>
      <th>e_0844</th>
      <th>e_0845</th>
      <th>e_0846</th>
      <th>e_0847</th>
      <th>e_0848</th>
      <th>e_0849</th>
      <th>e_0850</th>
      <th>e_0851</th>
      <th>e_0852</th>
      <th>e_0853</th>
      <th>e_0854</th>
      <th>e_0855</th>
      <th>e_0856</th>
      <th>e_0857</th>
      <th>e_0858</th>
      <th>e_0859</th>
      <th>e_0860</th>
      <th>e_0861</th>
      <th>e_0862</th>
      <th>e_0863</th>
      <th>e_0864</th>
      <th>e_0865</th>
      <th>e_0866</th>
      <th>e_0867</th>
      <th>e_0868</th>
      <th>e_0869</th>
      <th>e_0870</th>
      <th>e_0871</th>
      <th>e_0872</th>
      <th>e_0873</th>
      <th>e_0874</th>
      <th>e_0875</th>
      <th>e_0876</th>
      <th>e_0877</th>
      <th>e_0878</th>
      <th>e_0879</th>
      <th>e_0880</th>
      <th>e_0881</th>
      <th>e_0882</th>
      <th>e_0883</th>
      <th>e_0884</th>
      <th>e_0885</th>
      <th>e_0886</th>
      <th>e_0887</th>
      <th>e_0888</th>
      <th>e_0889</th>
      <th>e_0890</th>
      <th>e_0891</th>
      <th>e_0892</th>
      <th>e_0893</th>
      <th>e_0894</th>
      <th>e_0895</th>
      <th>e_0896</th>
      <th>e_0897</th>
      <th>e_0898</th>
      <th>e_0899</th>
      <th>e_0900</th>
      <th>e_0901</th>
      <th>e_0902</th>
      <th>e_0903</th>
      <th>e_0904</th>
      <th>e_0905</th>
      <th>e_0906</th>
      <th>e_0907</th>
      <th>e_0908</th>
      <th>e_0909</th>
      <th>e_0910</th>
      <th>e_0911</th>
      <th>e_0912</th>
      <th>e_0913</th>
      <th>e_0914</th>
      <th>e_0915</th>
      <th>e_0916</th>
      <th>e_0917</th>
      <th>e_0918</th>
      <th>e_0919</th>
      <th>e_0920</th>
      <th>e_0921</th>
      <th>e_0922</th>
      <th>e_0923</th>
      <th>e_0924</th>
      <th>e_0925</th>
      <th>e_0926</th>
      <th>e_0927</th>
      <th>e_0928</th>
      <th>e_0929</th>
      <th>e_0930</th>
      <th>e_0931</th>
      <th>e_0932</th>
      <th>e_0933</th>
      <th>e_0934</th>
      <th>e_0935</th>
      <th>e_0936</th>
      <th>e_0937</th>
      <th>e_0938</th>
      <th>e_0939</th>
      <th>e_0940</th>
      <th>e_0941</th>
      <th>e_0942</th>
      <th>e_0943</th>
      <th>e_0944</th>
      <th>e_0945</th>
      <th>e_0946</th>
      <th>e_0947</th>
      <th>e_0948</th>
      <th>e_0949</th>
      <th>e_0950</th>
      <th>e_0951</th>
      <th>e_0952</th>
      <th>e_0953</th>
      <th>e_0954</th>
      <th>e_0955</th>
      <th>e_0956</th>
      <th>e_0957</th>
      <th>e_0958</th>
      <th>e_0959</th>
      <th>e_0960</th>
      <th>e_0961</th>
      <th>e_0962</th>
      <th>e_0963</th>
      <th>e_0964</th>
      <th>e_0965</th>
      <th>e_0966</th>
      <th>e_0967</th>
      <th>e_0968</th>
      <th>e_0969</th>
      <th>e_0970</th>
      <th>e_0971</th>
      <th>e_0972</th>
      <th>e_0973</th>
      <th>e_0974</th>
      <th>e_0975</th>
      <th>e_0976</th>
      <th>e_0977</th>
      <th>e_0978</th>
      <th>e_0979</th>
      <th>e_0980</th>
      <th>e_0981</th>
      <th>e_0982</th>
      <th>e_0983</th>
      <th>e_0984</th>
      <th>e_0985</th>
      <th>e_0986</th>
      <th>e_0987</th>
      <th>e_0988</th>
      <th>e_0989</th>
      <th>e_0990</th>
      <th>e_0991</th>
      <th>e_0992</th>
      <th>e_0993</th>
      <th>e_0994</th>
      <th>e_0995</th>
      <th>e_0996</th>
      <th>e_0997</th>
      <th>e_0998</th>
      <th>e_0999</th>
      <th>e_1000</th>
      <th>e_1001</th>
      <th>e_1002</th>
      <th>e_1003</th>
      <th>e_1004</th>
      <th>e_1005</th>
      <th>e_1006</th>
      <th>e_1007</th>
      <th>e_1008</th>
      <th>e_1009</th>
      <th>e_1010</th>
      <th>e_1011</th>
      <th>e_1012</th>
      <th>e_1013</th>
      <th>e_1014</th>
      <th>e_1015</th>
      <th>e_1016</th>
      <th>e_1017</th>
      <th>e_1018</th>
      <th>e_1019</th>
      <th>e_1020</th>
      <th>e_1021</th>
      <th>e_1022</th>
      <th>e_1023</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>female</td>
      <td>I loved this doctor!</td>
      <td>-0.601180</td>
      <td>0.639239</td>
      <td>-1.060369</td>
      <td>-0.493731</td>
      <td>-0.560601</td>
      <td>-1.008939</td>
      <td>-0.598373</td>
      <td>-0.672984</td>
      <td>-0.640709</td>
      <td>0.035109</td>
      <td>-0.394858</td>
      <td>1.125174</td>
      <td>-0.809709</td>
      <td>0.092503</td>
      <td>-1.561161</td>
      <td>-0.338891</td>
      <td>-0.980971</td>
      <td>-0.218150</td>
      <td>-0.770218</td>
      <td>0.518710</td>
      <td>-0.154178</td>
      <td>-0.465516</td>
      <td>-0.636097</td>
      <td>0.136777</td>
      <td>-0.671058</td>
      <td>0.887400</td>
      <td>1.150700</td>
      <td>-0.255780</td>
      <td>-0.124600</td>
      <td>-1.695019</td>
      <td>-0.176871</td>
      <td>-0.554525</td>
      <td>0.420271</td>
      <td>1.104315</td>
      <td>-0.662254</td>
      <td>-1.104489</td>
      <td>-0.150348</td>
      <td>-0.328107</td>
      <td>-0.265295</td>
      <td>-0.232560</td>
      <td>-0.732200</td>
      <td>0.102851</td>
      <td>1.920283</td>
      <td>0.345062</td>
      <td>0.727855</td>
      <td>-0.558262</td>
      <td>-0.727879</td>
      <td>0.068228</td>
      <td>-0.288561</td>
      <td>-1.376903</td>
      <td>0.480348</td>
      <td>-0.951236</td>
      <td>-0.184960</td>
      <td>-0.977992</td>
      <td>-0.494253</td>
      <td>-0.142820</td>
      <td>0.186124</td>
      <td>0.165433</td>
      <td>-0.054685</td>
      <td>0.401775</td>
      <td>-0.606251</td>
      <td>-0.400375</td>
      <td>0.273657</td>
      <td>-0.347373</td>
      <td>0.430465</td>
      <td>0.691614</td>
      <td>-0.515043</td>
      <td>-0.089149</td>
      <td>0.224054</td>
      <td>-0.449324</td>
      <td>-0.194017</td>
      <td>0.594868</td>
      <td>-0.614699</td>
      <td>-0.372429</td>
      <td>-0.152741</td>
      <td>-0.066052</td>
      <td>1.074707</td>
      <td>-0.810009</td>
      <td>0.675266</td>
      <td>-0.609482</td>
      <td>0.561731</td>
      <td>-0.939348</td>
      <td>-0.691044</td>
      <td>-0.995084</td>
      <td>0.166328</td>
      <td>-1.531809</td>
      <td>-0.379524</td>
      <td>-0.498860</td>
      <td>-0.741533</td>
      <td>-0.413629</td>
      <td>1.733109</td>
      <td>-0.791184</td>
      <td>-0.098716</td>
      <td>-1.233320</td>
      <td>0.137790</td>
      <td>0.938824</td>
      <td>0.544055</td>
      <td>-1.024858</td>
      <td>0.578154</td>
      <td>-0.508842</td>
      <td>-1.023441</td>
      <td>0.597845</td>
      <td>1.085201</td>
      <td>-1.700814</td>
      <td>-0.930898</td>
      <td>0.512371</td>
      <td>-1.246665</td>
      <td>-0.310088</td>
      <td>0.550669</td>
      <td>-1.052263</td>
      <td>0.829993</td>
      <td>-0.637790</td>
      <td>-0.438172</td>
      <td>-0.568537</td>
      <td>0.722001</td>
      <td>-0.957278</td>
      <td>-0.768909</td>
      <td>-0.160705</td>
      <td>1.836634</td>
      <td>-0.581477</td>
      <td>0.488977</td>
      <td>0.347504</td>
      <td>0.783655</td>
      <td>0.589048</td>
      <td>-0.770469</td>
      <td>0.439723</td>
      <td>-0.408767</td>
      <td>0.295209</td>
      <td>1.149268</td>
      <td>0.160561</td>
      <td>0.342767</td>
      <td>-1.275258</td>
      <td>-0.075461</td>
      <td>0.347347</td>
      <td>-1.197512</td>
      <td>-1.346758</td>
      <td>0.052439</td>
      <td>-1.996378</td>
      <td>0.061255</td>
      <td>-0.809439</td>
      <td>-0.636264</td>
      <td>-0.521608</td>
      <td>0.209666</td>
      <td>1.201379</td>
      <td>1.304154</td>
      <td>0.858928</td>
      <td>1.373042</td>
      <td>0.723125</td>
      <td>-0.444027</td>
      <td>0.397904</td>
      <td>-1.185389</td>
      <td>0.309025</td>
      <td>0.101140</td>
      <td>0.790087</td>
      <td>-0.622007</td>
      <td>-0.557396</td>
      <td>-1.449296</td>
      <td>-0.310137</td>
      <td>1.294056</td>
      <td>0.66767</td>
      <td>-1.077920</td>
      <td>-0.054805</td>
      <td>-0.571364</td>
      <td>1.299067</td>
      <td>-0.331780</td>
      <td>-0.840044</td>
      <td>1.282067</td>
      <td>0.425645</td>
      <td>1.46890</td>
      <td>-0.662942</td>
      <td>0.312071</td>
      <td>1.420856</td>
      <td>0.084983</td>
      <td>0.438224</td>
      <td>-0.310173</td>
      <td>-0.981818</td>
      <td>0.668649</td>
      <td>-1.796632</td>
      <td>-0.476523</td>
      <td>0.171581</td>
      <td>0.08128</td>
      <td>-1.055869</td>
      <td>0.731145</td>
      <td>0.082770</td>
      <td>0.402360</td>
      <td>-0.111507</td>
      <td>1.052606</td>
      <td>0.101429</td>
      <td>-0.436716</td>
      <td>-0.689745</td>
      <td>-0.359305</td>
      <td>-0.849818</td>
      <td>0.102386</td>
      <td>-0.674699</td>
      <td>-0.632386</td>
      <td>0.635284</td>
      <td>-0.454286</td>
      <td>0.002086</td>
      <td>-0.698927</td>
      <td>-1.261298</td>
      <td>0.795101</td>
      <td>-0.073547</td>
      <td>-0.325837</td>
      <td>0.421853</td>
      <td>-1.620993</td>
      <td>1.901134</td>
      <td>-0.371985</td>
      <td>-1.075006</td>
      <td>0.779401</td>
      <td>-0.981726</td>
      <td>1.718573</td>
      <td>-0.156533</td>
      <td>-1.501477</td>
      <td>0.638842</td>
      <td>-0.603821</td>
      <td>-0.441458</td>
      <td>-0.419934</td>
      <td>1.299583</td>
      <td>-0.329041</td>
      <td>0.187053</td>
      <td>1.476716</td>
      <td>0.841890</td>
      <td>1.378884</td>
      <td>1.415993</td>
      <td>0.490228</td>
      <td>0.93683</td>
      <td>-1.134727</td>
      <td>-1.298774</td>
      <td>-0.237284</td>
      <td>-0.639338</td>
      <td>-0.062777</td>
      <td>-0.571427</td>
      <td>-0.696611</td>
      <td>-1.674279</td>
      <td>0.200118</td>
      <td>0.566758</td>
      <td>1.258007</td>
      <td>0.281263</td>
      <td>-0.227386</td>
      <td>0.403024</td>
      <td>-0.913720</td>
      <td>-0.332624</td>
      <td>-1.145163</td>
      <td>-1.373416</td>
      <td>0.726468</td>
      <td>-0.116224</td>
      <td>-1.080073</td>
      <td>1.629549</td>
      <td>...</td>
      <td>-0.597258</td>
      <td>0.473389</td>
      <td>-0.087902</td>
      <td>-0.734512</td>
      <td>-0.192177</td>
      <td>1.098324</td>
      <td>0.252797</td>
      <td>-0.220380</td>
      <td>0.970834</td>
      <td>0.379641</td>
      <td>0.702579</td>
      <td>0.312840</td>
      <td>-0.014865</td>
      <td>0.076790</td>
      <td>-0.926711</td>
      <td>0.283459</td>
      <td>-0.201210</td>
      <td>-1.507544</td>
      <td>1.013160</td>
      <td>0.399853</td>
      <td>-0.560346</td>
      <td>-0.432460</td>
      <td>0.738794</td>
      <td>0.271019</td>
      <td>0.758012</td>
      <td>0.104948</td>
      <td>0.032012</td>
      <td>-1.118263</td>
      <td>0.817341</td>
      <td>-0.134954</td>
      <td>-0.367428</td>
      <td>-1.095511</td>
      <td>1.424716</td>
      <td>-0.45837</td>
      <td>-1.005259</td>
      <td>1.168612</td>
      <td>-0.739624</td>
      <td>-0.778042</td>
      <td>-0.356735</td>
      <td>0.470458</td>
      <td>0.181306</td>
      <td>0.867469</td>
      <td>-0.033199</td>
      <td>-0.059742</td>
      <td>0.067898</td>
      <td>-0.396584</td>
      <td>1.678158</td>
      <td>-0.886795</td>
      <td>0.431772</td>
      <td>0.239491</td>
      <td>-0.398206</td>
      <td>0.357574</td>
      <td>-0.649486</td>
      <td>0.884956</td>
      <td>0.774565</td>
      <td>-0.091967</td>
      <td>0.539807</td>
      <td>-0.098839</td>
      <td>0.407467</td>
      <td>0.022493</td>
      <td>0.596556</td>
      <td>-2.279631</td>
      <td>-1.012586</td>
      <td>-0.515414</td>
      <td>1.008494</td>
      <td>0.024449</td>
      <td>0.786387</td>
      <td>-0.039095</td>
      <td>-0.282467</td>
      <td>1.210615</td>
      <td>0.009027</td>
      <td>0.694995</td>
      <td>-0.778203</td>
      <td>-0.434733</td>
      <td>-0.546121</td>
      <td>0.111783</td>
      <td>-0.414437</td>
      <td>-0.186292</td>
      <td>-0.924311</td>
      <td>0.771270</td>
      <td>-0.726940</td>
      <td>-0.002945</td>
      <td>-0.904097</td>
      <td>-0.78010</td>
      <td>-1.344393</td>
      <td>0.419025</td>
      <td>0.236579</td>
      <td>-0.147506</td>
      <td>0.422931</td>
      <td>0.268999</td>
      <td>-1.120625</td>
      <td>-2.346339</td>
      <td>0.059263</td>
      <td>0.432407</td>
      <td>-0.029169</td>
      <td>0.342242</td>
      <td>-0.227718</td>
      <td>0.429898</td>
      <td>-0.487460</td>
      <td>0.215381</td>
      <td>-1.755592</td>
      <td>0.571806</td>
      <td>1.145492</td>
      <td>-0.595226</td>
      <td>0.279368</td>
      <td>-1.833523</td>
      <td>-0.318555</td>
      <td>-0.334240</td>
      <td>1.546089</td>
      <td>0.996179</td>
      <td>0.365355</td>
      <td>0.795756</td>
      <td>0.931366</td>
      <td>-1.328836</td>
      <td>2.221819</td>
      <td>0.533793</td>
      <td>0.419647</td>
      <td>0.607096</td>
      <td>1.148281</td>
      <td>0.962832</td>
      <td>-0.627507</td>
      <td>0.023852</td>
      <td>-0.977026</td>
      <td>0.372186</td>
      <td>-0.191951</td>
      <td>-0.261494</td>
      <td>1.279736</td>
      <td>0.743437</td>
      <td>0.312943</td>
      <td>0.249434</td>
      <td>-1.020184</td>
      <td>-0.526093</td>
      <td>-0.145118</td>
      <td>-1.224916</td>
      <td>0.013893</td>
      <td>0.314860</td>
      <td>-0.184937</td>
      <td>-0.325164</td>
      <td>1.366373</td>
      <td>0.274657</td>
      <td>0.026925</td>
      <td>-0.244764</td>
      <td>-0.087459</td>
      <td>2.440723</td>
      <td>-0.211444</td>
      <td>1.791491</td>
      <td>-1.783760</td>
      <td>1.172868</td>
      <td>-1.588579</td>
      <td>0.547428</td>
      <td>1.236403</td>
      <td>0.238765</td>
      <td>1.074080</td>
      <td>0.971804</td>
      <td>1.481358</td>
      <td>-0.260144</td>
      <td>-0.372862</td>
      <td>-1.668835</td>
      <td>0.814127</td>
      <td>0.459048</td>
      <td>-0.537239</td>
      <td>-1.363500</td>
      <td>-1.937048</td>
      <td>0.223611</td>
      <td>-0.093947</td>
      <td>0.206138</td>
      <td>1.323856</td>
      <td>-0.881426</td>
      <td>0.858833</td>
      <td>-0.481818</td>
      <td>-1.63406</td>
      <td>1.143431</td>
      <td>-0.822667</td>
      <td>-0.389236</td>
      <td>0.754676</td>
      <td>-0.474368</td>
      <td>1.164978</td>
      <td>-1.249432</td>
      <td>0.841197</td>
      <td>-0.271101</td>
      <td>0.239336</td>
      <td>-0.874708</td>
      <td>-0.484608</td>
      <td>1.776312</td>
      <td>-0.655398</td>
      <td>-0.595401</td>
      <td>1.292877</td>
      <td>-0.673088</td>
      <td>1.183725</td>
      <td>1.045448</td>
      <td>-0.711501</td>
      <td>-0.435948</td>
      <td>-0.414408</td>
      <td>-0.82087</td>
      <td>0.125983</td>
      <td>0.092412</td>
      <td>0.571426</td>
      <td>-1.369650</td>
      <td>0.498595</td>
      <td>-0.114022</td>
      <td>-2.056757</td>
      <td>-0.606038</td>
      <td>-0.014727</td>
      <td>-1.732948</td>
      <td>-0.208160</td>
      <td>-0.257968</td>
      <td>0.336272</td>
      <td>0.292738</td>
      <td>-1.020895</td>
      <td>0.707942</td>
      <td>-0.413066</td>
      <td>0.015892</td>
      <td>-0.870656</td>
      <td>0.356665</td>
      <td>-1.240625</td>
      <td>0.697207</td>
      <td>-0.899096</td>
      <td>-0.546283</td>
      <td>1.346067</td>
      <td>0.151549</td>
      <td>0.608179</td>
      <td>-0.642331</td>
      <td>-0.491367</td>
      <td>1.476060</td>
      <td>-0.239341</td>
      <td>0.210075</td>
      <td>0.653871</td>
      <td>0.124511</td>
      <td>-1.450796</td>
      <td>0.131711</td>
      <td>0.597644</td>
      <td>-0.239655</td>
      <td>0.151939</td>
      <td>-0.989297</td>
      <td>1.120132</td>
      <td>0.086377</td>
      <td>0.172451</td>
      <td>-1.515352</td>
      <td>-0.422561</td>
      <td>1.618894</td>
      <td>1.162732</td>
      <td>-0.041656</td>
      <td>-0.473772</td>
      <td>0.420647</td>
      <td>-0.482861</td>
      <td>0.206311</td>
      <td>-0.806356</td>
      <td>0.864795</td>
      <td>-0.179643</td>
      <td>-0.095540</td>
    </tr>
    <tr>
      <th>1</th>
      <td>male</td>
      <td>This doctor was absolutely terrible.</td>
      <td>-1.080321</td>
      <td>1.283710</td>
      <td>0.032944</td>
      <td>-0.505388</td>
      <td>-0.632284</td>
      <td>0.240779</td>
      <td>0.497700</td>
      <td>0.061434</td>
      <td>-0.951467</td>
      <td>-1.099914</td>
      <td>0.371787</td>
      <td>1.267668</td>
      <td>-0.751966</td>
      <td>-0.042724</td>
      <td>-0.142016</td>
      <td>0.127234</td>
      <td>-0.733424</td>
      <td>-1.139796</td>
      <td>-0.325070</td>
      <td>0.430322</td>
      <td>-0.098004</td>
      <td>1.163077</td>
      <td>1.057190</td>
      <td>0.532064</td>
      <td>-0.054028</td>
      <td>-0.344783</td>
      <td>1.042196</td>
      <td>0.132536</td>
      <td>0.173455</td>
      <td>-0.846880</td>
      <td>-0.294927</td>
      <td>-1.092173</td>
      <td>-0.739157</td>
      <td>0.072505</td>
      <td>-1.381498</td>
      <td>-0.039768</td>
      <td>-0.596037</td>
      <td>-0.635421</td>
      <td>-0.102166</td>
      <td>-0.223891</td>
      <td>-0.110668</td>
      <td>1.610051</td>
      <td>0.124495</td>
      <td>0.262522</td>
      <td>0.471182</td>
      <td>0.363986</td>
      <td>0.149284</td>
      <td>1.757610</td>
      <td>-0.095173</td>
      <td>-0.828335</td>
      <td>-0.169187</td>
      <td>-0.167354</td>
      <td>0.181549</td>
      <td>-0.468074</td>
      <td>0.173165</td>
      <td>-0.151472</td>
      <td>0.153541</td>
      <td>-0.070349</td>
      <td>-0.070682</td>
      <td>1.346813</td>
      <td>0.838431</td>
      <td>-0.173599</td>
      <td>-0.698330</td>
      <td>-0.907078</td>
      <td>0.686929</td>
      <td>-0.253123</td>
      <td>-0.253507</td>
      <td>-0.816285</td>
      <td>0.577228</td>
      <td>-0.471222</td>
      <td>-0.319503</td>
      <td>0.318208</td>
      <td>-1.152313</td>
      <td>1.608094</td>
      <td>0.020386</td>
      <td>0.240881</td>
      <td>1.051513</td>
      <td>-0.431564</td>
      <td>-0.734053</td>
      <td>0.355924</td>
      <td>-0.735063</td>
      <td>-1.024491</td>
      <td>-0.607373</td>
      <td>-0.363772</td>
      <td>-1.032262</td>
      <td>-0.755497</td>
      <td>-1.072544</td>
      <td>-0.330346</td>
      <td>0.112159</td>
      <td>-0.765853</td>
      <td>2.702498</td>
      <td>-0.059790</td>
      <td>-2.331072</td>
      <td>-0.261409</td>
      <td>0.662297</td>
      <td>-0.134803</td>
      <td>2.094935</td>
      <td>-1.216020</td>
      <td>-1.468843</td>
      <td>-0.590109</td>
      <td>-0.603379</td>
      <td>0.032229</td>
      <td>-0.734086</td>
      <td>-1.041735</td>
      <td>-0.096881</td>
      <td>0.252744</td>
      <td>-0.755398</td>
      <td>-0.196471</td>
      <td>-0.673408</td>
      <td>0.323116</td>
      <td>0.485170</td>
      <td>0.852233</td>
      <td>0.038043</td>
      <td>0.106503</td>
      <td>1.900742</td>
      <td>-0.473968</td>
      <td>0.440853</td>
      <td>-0.124218</td>
      <td>0.818130</td>
      <td>-0.249900</td>
      <td>0.174284</td>
      <td>-2.027710</td>
      <td>-0.841279</td>
      <td>-0.510334</td>
      <td>-1.589421</td>
      <td>-0.064431</td>
      <td>-0.204134</td>
      <td>0.107323</td>
      <td>-0.129780</td>
      <td>-0.373625</td>
      <td>-0.085754</td>
      <td>-0.389158</td>
      <td>0.630451</td>
      <td>0.811590</td>
      <td>-1.157425</td>
      <td>-0.036667</td>
      <td>0.638930</td>
      <td>-0.031828</td>
      <td>0.162673</td>
      <td>-0.745701</td>
      <td>0.047340</td>
      <td>0.041956</td>
      <td>0.455531</td>
      <td>1.466353</td>
      <td>-0.493203</td>
      <td>0.315198</td>
      <td>0.956463</td>
      <td>0.169743</td>
      <td>-0.903740</td>
      <td>1.078133</td>
      <td>-0.639152</td>
      <td>0.206805</td>
      <td>-1.212701</td>
      <td>0.061930</td>
      <td>-1.587089</td>
      <td>0.509692</td>
      <td>-0.580704</td>
      <td>0.743137</td>
      <td>0.439220</td>
      <td>0.11038</td>
      <td>-1.247447</td>
      <td>1.323940</td>
      <td>0.404472</td>
      <td>0.451868</td>
      <td>-1.951448</td>
      <td>-2.136478</td>
      <td>-0.824689</td>
      <td>0.520747</td>
      <td>0.87729</td>
      <td>-0.365677</td>
      <td>0.608508</td>
      <td>1.291322</td>
      <td>0.141776</td>
      <td>0.668782</td>
      <td>0.493870</td>
      <td>-0.911925</td>
      <td>-0.265987</td>
      <td>-0.342515</td>
      <td>0.059859</td>
      <td>-0.457266</td>
      <td>-0.24478</td>
      <td>1.999361</td>
      <td>-0.012580</td>
      <td>0.126561</td>
      <td>-0.443919</td>
      <td>1.152566</td>
      <td>-0.219918</td>
      <td>-0.358424</td>
      <td>-0.215555</td>
      <td>0.169946</td>
      <td>0.193413</td>
      <td>0.425413</td>
      <td>0.506095</td>
      <td>-2.375514</td>
      <td>-0.682047</td>
      <td>-0.212779</td>
      <td>0.261091</td>
      <td>-0.382527</td>
      <td>-0.423046</td>
      <td>0.087569</td>
      <td>0.485063</td>
      <td>-0.342660</td>
      <td>0.455986</td>
      <td>0.331639</td>
      <td>-1.648497</td>
      <td>1.399007</td>
      <td>-0.594800</td>
      <td>0.471352</td>
      <td>-0.741982</td>
      <td>0.568690</td>
      <td>-0.537344</td>
      <td>1.354499</td>
      <td>-1.521543</td>
      <td>0.222686</td>
      <td>0.505541</td>
      <td>-0.384466</td>
      <td>0.048947</td>
      <td>0.243410</td>
      <td>-1.003186</td>
      <td>0.442602</td>
      <td>1.256965</td>
      <td>0.718853</td>
      <td>1.458385</td>
      <td>1.336809</td>
      <td>-1.110115</td>
      <td>-0.28113</td>
      <td>-0.021441</td>
      <td>0.969155</td>
      <td>-0.324079</td>
      <td>-0.551153</td>
      <td>-0.346971</td>
      <td>-0.426813</td>
      <td>-0.909856</td>
      <td>-0.224591</td>
      <td>0.519270</td>
      <td>0.436378</td>
      <td>0.557002</td>
      <td>0.615946</td>
      <td>0.307261</td>
      <td>-0.292611</td>
      <td>-0.646692</td>
      <td>-0.091192</td>
      <td>-0.124168</td>
      <td>0.044792</td>
      <td>0.370954</td>
      <td>-1.421038</td>
      <td>-1.321087</td>
      <td>1.192953</td>
      <td>...</td>
      <td>-0.160493</td>
      <td>-1.280425</td>
      <td>-0.769862</td>
      <td>0.573256</td>
      <td>-1.297933</td>
      <td>1.492451</td>
      <td>1.244544</td>
      <td>0.312218</td>
      <td>-0.620741</td>
      <td>0.367966</td>
      <td>2.416998</td>
      <td>2.586343</td>
      <td>-1.135545</td>
      <td>0.896954</td>
      <td>0.391467</td>
      <td>-0.674775</td>
      <td>0.383277</td>
      <td>-0.950578</td>
      <td>1.830727</td>
      <td>-1.018144</td>
      <td>-0.007086</td>
      <td>-0.491024</td>
      <td>0.520239</td>
      <td>0.675352</td>
      <td>1.206401</td>
      <td>-1.113754</td>
      <td>-1.293386</td>
      <td>-0.928670</td>
      <td>0.735877</td>
      <td>0.426821</td>
      <td>-0.453119</td>
      <td>-0.505470</td>
      <td>0.643926</td>
      <td>-0.40995</td>
      <td>-1.265347</td>
      <td>-0.086370</td>
      <td>0.149850</td>
      <td>-0.014541</td>
      <td>0.152579</td>
      <td>0.214134</td>
      <td>0.190900</td>
      <td>0.483520</td>
      <td>-0.121119</td>
      <td>0.216187</td>
      <td>-0.095705</td>
      <td>0.484240</td>
      <td>-0.256438</td>
      <td>0.128706</td>
      <td>0.124124</td>
      <td>0.442363</td>
      <td>-0.328852</td>
      <td>0.839022</td>
      <td>-0.413680</td>
      <td>-0.218301</td>
      <td>0.031112</td>
      <td>-0.781577</td>
      <td>0.877376</td>
      <td>0.426151</td>
      <td>0.650736</td>
      <td>-0.534363</td>
      <td>1.324010</td>
      <td>-2.276321</td>
      <td>-3.209808</td>
      <td>0.747673</td>
      <td>-0.090331</td>
      <td>-0.794744</td>
      <td>0.910227</td>
      <td>0.064211</td>
      <td>0.187118</td>
      <td>-0.292773</td>
      <td>-0.751870</td>
      <td>0.891957</td>
      <td>-0.681515</td>
      <td>-1.061648</td>
      <td>-0.573387</td>
      <td>0.548157</td>
      <td>-0.167158</td>
      <td>-0.570218</td>
      <td>-0.115314</td>
      <td>0.747868</td>
      <td>-0.937214</td>
      <td>-0.019237</td>
      <td>-1.126545</td>
      <td>-0.36322</td>
      <td>-1.234232</td>
      <td>0.423862</td>
      <td>-0.269932</td>
      <td>0.576194</td>
      <td>0.849581</td>
      <td>0.444871</td>
      <td>-0.502688</td>
      <td>-1.018462</td>
      <td>-0.920363</td>
      <td>-0.202659</td>
      <td>-0.456458</td>
      <td>1.216924</td>
      <td>-0.185181</td>
      <td>0.486069</td>
      <td>0.267084</td>
      <td>0.585335</td>
      <td>0.036500</td>
      <td>-0.048680</td>
      <td>1.431088</td>
      <td>-0.141862</td>
      <td>0.566101</td>
      <td>-1.238389</td>
      <td>0.072949</td>
      <td>0.038206</td>
      <td>-0.293941</td>
      <td>1.536463</td>
      <td>0.458766</td>
      <td>-0.149625</td>
      <td>-0.717818</td>
      <td>-0.079780</td>
      <td>1.701869</td>
      <td>0.439535</td>
      <td>-0.174674</td>
      <td>0.958559</td>
      <td>-0.054750</td>
      <td>0.944752</td>
      <td>-0.018844</td>
      <td>0.701800</td>
      <td>-0.769989</td>
      <td>0.253060</td>
      <td>0.769639</td>
      <td>-0.607609</td>
      <td>0.696354</td>
      <td>0.171143</td>
      <td>1.106053</td>
      <td>0.268299</td>
      <td>-1.047965</td>
      <td>0.640154</td>
      <td>0.143615</td>
      <td>-1.105975</td>
      <td>-0.016227</td>
      <td>0.142468</td>
      <td>0.596629</td>
      <td>-0.452742</td>
      <td>-0.313863</td>
      <td>-0.227832</td>
      <td>-0.207953</td>
      <td>-0.843668</td>
      <td>-1.502774</td>
      <td>1.050109</td>
      <td>-0.042179</td>
      <td>0.633935</td>
      <td>-0.994892</td>
      <td>-0.309290</td>
      <td>-1.750694</td>
      <td>-1.035756</td>
      <td>-0.893423</td>
      <td>0.439106</td>
      <td>0.468417</td>
      <td>0.332214</td>
      <td>0.615565</td>
      <td>0.167857</td>
      <td>-0.761188</td>
      <td>-0.513775</td>
      <td>-0.727299</td>
      <td>0.233110</td>
      <td>0.549183</td>
      <td>-1.956708</td>
      <td>-0.498497</td>
      <td>-0.176335</td>
      <td>-1.125636</td>
      <td>-0.663086</td>
      <td>-0.504846</td>
      <td>-0.284807</td>
      <td>1.412328</td>
      <td>1.304304</td>
      <td>-0.67363</td>
      <td>1.146111</td>
      <td>-1.070053</td>
      <td>-0.598915</td>
      <td>0.518672</td>
      <td>-0.419871</td>
      <td>-0.001672</td>
      <td>-0.915121</td>
      <td>1.048180</td>
      <td>1.200090</td>
      <td>-1.123845</td>
      <td>-0.956011</td>
      <td>-0.779801</td>
      <td>1.226384</td>
      <td>0.299932</td>
      <td>0.497791</td>
      <td>-0.184537</td>
      <td>-0.028379</td>
      <td>0.185598</td>
      <td>0.613601</td>
      <td>-0.006552</td>
      <td>-0.340542</td>
      <td>0.135926</td>
      <td>-0.15309</td>
      <td>-0.933908</td>
      <td>-0.327588</td>
      <td>1.260057</td>
      <td>-0.727343</td>
      <td>-0.019971</td>
      <td>0.352552</td>
      <td>-0.667697</td>
      <td>-1.120148</td>
      <td>-0.257728</td>
      <td>0.343014</td>
      <td>0.514783</td>
      <td>-1.494829</td>
      <td>-0.767745</td>
      <td>-0.098165</td>
      <td>-0.532586</td>
      <td>1.300745</td>
      <td>0.445362</td>
      <td>-0.591072</td>
      <td>0.472784</td>
      <td>0.128228</td>
      <td>-0.951936</td>
      <td>-0.301227</td>
      <td>-0.829075</td>
      <td>0.356493</td>
      <td>2.177831</td>
      <td>-0.453740</td>
      <td>0.180738</td>
      <td>-0.366111</td>
      <td>0.788271</td>
      <td>-0.376016</td>
      <td>-0.167796</td>
      <td>0.945092</td>
      <td>0.318102</td>
      <td>-0.313438</td>
      <td>-0.521864</td>
      <td>-0.804645</td>
      <td>0.371298</td>
      <td>-0.102799</td>
      <td>-0.398658</td>
      <td>-0.674932</td>
      <td>0.712733</td>
      <td>0.402257</td>
      <td>-0.189253</td>
      <td>-1.744041</td>
      <td>0.592453</td>
      <td>-0.101446</td>
      <td>1.562682</td>
      <td>-0.446034</td>
      <td>-0.073316</td>
      <td>0.778162</td>
      <td>-0.670258</td>
      <td>0.576500</td>
      <td>-0.036422</td>
      <td>-0.237191</td>
      <td>-0.103962</td>
      <td>-0.018753</td>
    </tr>
  </tbody>
</table>
<p>2 rows × 1026 columns</p>
</div></div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="Autocoder.code_lda_topics" class="doc_header"><code>Autocoder.code_lda_topics</code><a href="__main__.py#L89" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>Autocoder.code_lda_topics</code>(<strong><code>docs</code></strong>, <strong><code>df</code></strong>, <strong><code>k</code></strong>=<em><code>10</code></em>, <strong><code>n_features</code></strong>=<em><code>10000</code></em>)</p>
</blockquote>
<p>Encode texts as semantically meaningful vectors using Latent Dirichlet Alocation</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">comments</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;What is your favorite sitcom of all time?&quot;</span><span class="p">,</span> <span class="s1">&#39;I cannot wait to vote!&#39;</span><span class="p">]</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">&#39;over_18&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;yes&#39;</span><span class="p">,</span> <span class="s1">&#39;no&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">5</span><span class="p">,</span>
     <span class="s1">&#39;comments&#39;</span> <span class="p">:</span> <span class="n">comments</span> <span class="o">*</span> <span class="mi">5</span><span class="p">,</span>
      <span class="p">})</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>over_18</th>
      <th>comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>yes</td>
      <td>What is your favorite sitcom of all time?</td>
    </tr>
    <tr>
      <th>1</th>
      <td>no</td>
      <td>I cannot wait to vote!</td>
    </tr>
    <tr>
      <th>2</th>
      <td>yes</td>
      <td>What is your favorite sitcom of all time?</td>
    </tr>
    <tr>
      <th>3</th>
      <td>no</td>
      <td>I cannot wait to vote!</td>
    </tr>
    <tr>
      <th>4</th>
      <td>yes</td>
      <td>What is your favorite sitcom of all time?</td>
    </tr>
  </tbody>
</table>
</div></div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">ac</span><span class="o">.</span><span class="n">code_lda_topics</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;comments&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">df</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>preprocessing texts...
fitting model...
iteration: 1 of max_iter: 5
iteration: 2 of max_iter: 5
iteration: 3 of max_iter: 5
iteration: 4 of max_iter: 5
iteration: 5 of max_iter: 5
done.
done.
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>over_18</th>
      <th>comments</th>
      <th>topic_0000</th>
      <th>topic_0001</th>
      <th>topic_0002</th>
      <th>topic_0003</th>
      <th>topic_0004</th>
      <th>topic_0005</th>
      <th>topic_0006</th>
      <th>topic_0007</th>
      <th>topic_0008</th>
      <th>topic_0009</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>yes</td>
      <td>What is your favorite sitcom of all time?</td>
      <td>0.148763</td>
      <td>0.093341</td>
      <td>0.080723</td>
      <td>0.128911</td>
      <td>0.109816</td>
      <td>0.084724</td>
      <td>0.093611</td>
      <td>0.080860</td>
      <td>0.091758</td>
      <td>0.087493</td>
    </tr>
    <tr>
      <th>1</th>
      <td>no</td>
      <td>I cannot wait to vote!</td>
      <td>0.085687</td>
      <td>0.097749</td>
      <td>0.142486</td>
      <td>0.084145</td>
      <td>0.086931</td>
      <td>0.099608</td>
      <td>0.091913</td>
      <td>0.114741</td>
      <td>0.093014</td>
      <td>0.103728</td>
    </tr>
    <tr>
      <th>2</th>
      <td>yes</td>
      <td>What is your favorite sitcom of all time?</td>
      <td>0.148763</td>
      <td>0.093341</td>
      <td>0.080723</td>
      <td>0.128911</td>
      <td>0.109816</td>
      <td>0.084724</td>
      <td>0.093611</td>
      <td>0.080860</td>
      <td>0.091758</td>
      <td>0.087493</td>
    </tr>
    <tr>
      <th>3</th>
      <td>no</td>
      <td>I cannot wait to vote!</td>
      <td>0.085687</td>
      <td>0.097749</td>
      <td>0.142486</td>
      <td>0.084145</td>
      <td>0.086931</td>
      <td>0.099608</td>
      <td>0.091913</td>
      <td>0.114741</td>
      <td>0.093014</td>
      <td>0.103728</td>
    </tr>
    <tr>
      <th>4</th>
      <td>yes</td>
      <td>What is your favorite sitcom of all time?</td>
      <td>0.148763</td>
      <td>0.093341</td>
      <td>0.080723</td>
      <td>0.128911</td>
      <td>0.109816</td>
      <td>0.084724</td>
      <td>0.093611</td>
      <td>0.080860</td>
      <td>0.091758</td>
      <td>0.087493</td>
    </tr>
  </tbody>
</table>
</div></div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="Autocoder.code_callable" class="doc_header"><code>Autocoder.code_callable</code><a href="__main__.py#L105" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>Autocoder.code_callable</code>(<strong><code>docs</code></strong>, <strong><code>df</code></strong>, <strong><code>fn</code></strong>)</p>
</blockquote>
<p>Autocodes text for any user-specified function
The <code>fn</code> parameter must be a Callable and return a dictionary for each
text in <code>docs</code> where the keys are desired column names and values are scores
or probabilities.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">reviews</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;I loved this doctor!&quot;</span><span class="p">,</span> <span class="s2">&quot;This doctor was absolutely terrible.&quot;</span><span class="p">]</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;female&#39;</span><span class="p">,</span> <span class="s1">&#39;male&#39;</span><span class="p">],</span>
     <span class="s1">&#39;review&#39;</span> <span class="p">:</span> <span class="n">reviews</span><span class="p">,</span>
      <span class="p">})</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>gender</th>
      <th>review</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>female</td>
      <td>I loved this doctor!</td>
    </tr>
    <tr>
      <th>1</th>
      <td>male</td>
      <td>This doctor was absolutely terrible.</td>
    </tr>
  </tbody>
</table>
</div></div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">some_function</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">val</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;terrible&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;has_the_word_terrible?&#39;</span> <span class="p">:</span> <span class="n">val</span><span class="p">}</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">ac</span><span class="o">.</span><span class="n">code_callable</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">review</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">some_function</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>gender</th>
      <th>review</th>
      <th>has_the_word_terrible?</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>female</td>
      <td>I loved this doctor!</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>male</td>
      <td>This doctor was absolutely terrible.</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div>

</div>

</div>
</div>

</div>
    {% endraw %}

</div>


